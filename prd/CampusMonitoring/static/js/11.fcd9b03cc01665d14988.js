webpackJsonp([11],{"3u7M":function(t,e){},DoMg:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("fZjL"),s=a.n(i),r=a("TUEd"),n=a("Rq22"),h=a("skEV"),o=a("RA0d"),g=a("ie08"),l=a("5wXm"),c=a("8jws"),d=a("q7dB"),v=(a("5uec"),a("VAfJ")),u={name:"HealthyContrast",components:{ElCheckbox:r.a,DatePicker:n.a,ElRadio:h.a,ElLine:o.a,MonthRange:g.a,Bar:l.a,Pie3:c.a,ElSummary:v.a},data:function(){return{provinceId:localStorage.getItem("provinceId"),cityId:localStorage.getItem("cityId"),districtId:localStorage.getItem("districtId"),gardenName:localStorage.getItem("gardenName"),gardenId:localStorage.getItem("gardenId"),cityList:this.$store.state.areaList,areaLevel:this.$store.state.areaLevel,isOnce:!0,growthC:{time:{startTime:"2018-07-29",endTime:"2018-07-30"},sex:"男童",grade:"托班",data:[]},growthL:{time:{startTime:"2018-07-29",endTime:"2018-07-30"},sex:"男童",grade:"托班",data:[]},sex:["男童","女童"],grade:["托班","小班","中班","大班"],averageHeight:{xData:["暂无数据"],data:[0],linearGradient:["#33b3b7","#53e9ee"],yName:"身高（cm）",labelHide:!0,labelNuit:"{c}cm",grid:{top:"18%",left:"0%",right:"0%",bottom:"0%",containLabel:!0},summary:"..."},averageWeight:{xData:["暂无数据"],data:[0],linearGradient:["#d0bb66","#ffe98f"],yName:"体重（kg）",labelHide:!0,labelNuit:"{c}kg",grid:{top:"18%",left:"0%",right:"0%",bottom:"0%",containLabel:!0},summary:"..."},dataList:[{title:"月份",data:[{value:0,name:"暂无数据"}]},{title:"月份",data:[{value:0,name:"暂无数据"}]},{title:"月份",data:[{value:0,name:"暂无数据"}]}]}},mounted:function(){this.$common.border(window.$(".contrast")),this.timeSlot(7,211),this.timeSlot(90,212),window.$(".title-date li").click(function(){window.$(this).closest("li").addClass("on").siblings().removeClass("on")})},watch:{"growthC.time":{deep:!0,handler:function(){this.getGrowthC()}},"growthC.sex":{deep:!0,handler:function(){this.dayGrowthC()}},"growthC.grade":{deep:!0,handler:function(){this.dayGrowthC()}},"growthL.time":{deep:!0,handler:function(){this.getGrowthL()}},"growthL.sex":{deep:!0,handler:function(){this.getGrowthL()}},"growthL.grade":{deep:!0,handler:function(){this.getGrowthL()}}},methods:{getGrowthC:function(){var t=this,e=this.growthC.time.startTime+" 00:00:01",a=this.growthC.time.endTime+" 23:59:59";window.$.ajax({url:"http://api.youjiaoyun.net/weixin.asmx/GetGardenAvgDataList?jsoncallback=?",dataType:"jsonp",data:{sdate:e,edate:a,gid:this.gardenId},jsonp:"jsoncallback",async:!1,success:function(e){t.growthC.data=e,t.dayGrowthC()}})},dayGrowthC:function(){var t=this.growthC.data;console.log(t);var e=[],a="",i="";if(t.length){for(var s=0,r=t.length;s<r;s++){for(var n=[[],[],[],[]],h=0,o=t[s].classdatas.length;h<o;h++)if(t[s].classdatas[h].datas.length){var g=t[s].classdatas[h].datas.filter(function(t){return 0===t.sex}),l=t[s].classdatas[h].datas.filter(function(t){return 1===t.sex});g.length?(n[0].push(g[0].ClassAvgHeight),n[1].push(g[0].ClassAvgWeight)):(n[0].push(0),n[1].push(0)),l.length?(n[2].push(l[0].ClassAvgHeight),n[3].push(l[0].ClassAvgWeight)):(n[2].push(0),n[3].push(0))}n=n.map(function(t){var e=0;if(t.length){for(var a=0,i=t.length;a<i;a++)e+=t[a];return e/t.length}return 0}),e.push({name:t[s].GradeName,"女童":{height:n[0],weight:n[1]},"男童":{height:n[2],weight:n[3]}})}var c=e.filter(function(t){return t.name&&(t["女童"].height||t["男童"].height)});if(c.length){c.sort(function(t,e){return e["男童"].height+e["女童"].height-(t["男童"].height+t["女童"].height)});for(var d=this.growthC.sex,v={name:[],value:{height:[]}},u=0;u<c.length;u++)v.name.push(c[u].name),v.value.height.push(c[u][d].height.toFixed(2));this.averageHeight.xData=v.name,this.averageHeight.data=v.value.height,a="在截至计算时间内,该园所身体发育如下: <br>平均身高最高: "+c[0].name+" 平均身高最矮:"+c[c.length-1].name,this.averageHeight.summary=a}else this.averageHeight.xData=["暂无数据"],this.averageHeight.data=["0"],this.averageHeight.summary="暂无总结";var m=e.filter(function(t){return t.name&&(t["女童"].weight||t["男童"].weight)});if(m.length){m.sort(function(t,e){return e["男童"].weight+e["女童"].weight-(t["男童"].weight+t["女童"].weight)});for(var w=this.growthC.sex,f={name:[],value:{weight:[]}},C=0;C<m.length;C++)f.name.push(m[C].name),f.value.weight.push(m[C][w].weight.toFixed(2));this.averageWeight.xData=f.name,this.averageWeight.data=f.value.weight,i="在截至计算时间内,该园所身体发育如下: <br>平均体重最重: "+m[0].name+" 平均体重最轻:"+m[m.length-1].name,this.averageWeight.summary=i}else this.averageWeight.xData=["暂无数据"],this.averageWeight.data=["0"],this.averageWeight.summary="暂无总结"}else this.averageHeight.xData=["暂无数据"],this.averageHeight.data=["0"],this.averageHeight.summary="暂无总结",this.averageWeight.xData=["暂无数据"],this.averageWeight.data=["0"],this.averageWeight.summary="暂无总结"},getMonthDays:function(t){var e=(new Date).getYear();e+=e<2e3?1900:0;var a=new Date(e,t,1);return(new Date(e,t+1,1)-a)/864e5},getGrowthL:function(){var t=new Date,e=t.getMonth(),a=this.getMonthDays(e),i=t.getFullYear()+"-"+(t.getMonth()+1)+"-01",s=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+a;this.GetGrowthL(i,s,0),a=this.getMonthDays(e-1),i=t.getFullYear()+"-"+t.getMonth()+"-01",s=t.getFullYear()+"-"+t.getMonth()+"-"+a,this.GetGrowthL(i,s,1),a=this.getMonthDays(e-2),i=t.getFullYear()+"-"+(t.getMonth()-1)+"-01",s=t.getFullYear()+"-"+(t.getMonth()-1)+"-"+a,this.GetGrowthL(i,s,2)},GetGrowthL:function(t,e,a){var i=this,s={ProvinceId:this.provinceId,CityId:this.cityId,DistrictId:this.districtId,Gid:this.gardenId,IsMonth:!0,StartDate:t,EndDate:e};window.$.ajax({url:"http://api.youjiaoyun.net/weixin.asmx/GetBodyCheckResultList?jsoncallback=?",dataType:"jsonp",data:s,jsonp:"jsoncallback",async:!1,success:function(e){i.growthL.data=e,i.MonthGrowthL(t,a)}})},avgHW:function(t,e,a){var i=[],r=t.filter(function(t){return t.Gender===e&&t.Gid===a});if(r=this.$common.compare(r,"BMIResult"),0!==s()(r).length){var n={"偏轻":0,"均值":0,"肥胖":0,"偏重":0,"超重":0};for(var h in n)r[h]?n[h]=r[h]:n[h]=0;window.$.each(n,function(t,e){i.push({name:t,value:e})})}else i=[{name:"暂无数据",value:0}];return i},MonthGrowthL:function(t,e){var a=this.growthL.data,i=0,s=1;switch(this.growthL.sex){case"女童":i=0;break;case"男童":i=1}switch(this.growthL.grade){case"托班":s=1;break;case"小班":s=2;break;case"中班":s=3;break;case"大班":s=4}var r=a.filter(function(t){return t.Gender===i&&t.GradeNum===s}),n=this.avgHW(r,i,parseInt(this.gardenId));this.dataList[e].title=t.split("-")[1]+"月份",this.dataList[e].data=n},timeSlot:function(t,e){var a=Object(d.a)(t);switch(e){case 211:this.growthC.time.startTime=a.t1,this.growthC.time.endTime=a.t2;break;case 212:this.growthL.time.startTime=a.t1,this.growthL.time.endTime=a.t2}},getData:function(t,e){var a=t[0];switch(e){case 211:this.growthC.time.startTime=a.t1,this.growthC.time.endTime=a.t2}},getCheckBox:function(t,e){var a=t[0];switch(e){case 212:this.growthL.cityList=a}},getMonthRange:function(t,e){var a=t[0];switch(e){case 212:this.growthL.time.startTime=a.t1,this.growthL.time.endTime=a.t2}},getRadio:function(t,e){var a=t[0];switch(e){case 211.1:this.growthC.sex=a;break;case 211.2:this.growthC.grade=a;break;case 212.1:this.growthL.sex=a;break;case 212.2:this.growthL.grade=a}}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contrast-box growth"},[a("div",{staticClass:"contrast"},[a("div",{staticClass:"c-main-box-box"},[a("div",{staticClass:"c-main-box"},[a("div",{staticClass:"c-main"},[a("div",{staticClass:"c-left"},[a("div",{staticClass:"filter-box"},[a("div",{staticClass:"title-date"},[t._m(0),t._v(" "),a("ul",[a("li",{staticClass:"btn1",on:{click:function(e){t.timeSlot(7,211)}}},[t._v("最近7天")]),t._v(" "),a("li",{staticClass:"btn1",on:{click:function(e){t.timeSlot(30,211)}}},[t._v("最近30天")]),t._v(" "),a("li",[a("date-picker",{on:{getData:function(e){t.getData(arguments,211)}}})],1)])]),t._v(" "),a("div",{staticClass:"float"},[a("h3",[t._v("性别选择（单选）")]),t._v(" "),a("el-radio",{attrs:{tabList:t.sex},on:{getRadio:function(e){t.getRadio(arguments,211.1)}}})],1)]),t._v(" "),a("div",{staticClass:"echarts-box"},[a("div",[a("h3",{staticClass:"pointTitle iconfont"},[t._v("平均身高")]),t._v(" "),"暂无总结"!==t.averageHeight.summary?a("bar",{attrs:{settings:t.averageHeight}}):a("no-data",{attrs:{item:"平均身高"}}),t._v(" "),a("el-summary",{attrs:{data:t.averageHeight.summary}})],1),t._v(" "),a("div",[a("h3",{staticClass:"pointTitle iconfont"},[t._v("平均体重")]),t._v(" "),"暂无总结"!==t.averageWeight.summary?a("bar",{attrs:{settings:t.averageWeight}}):a("no-data",{attrs:{item:"平均体重"}}),t._v(" "),a("el-summary",{attrs:{data:t.averageWeight.summary}})],1)])]),t._v(" "),a("div",{staticClass:"c-right"},[a("div",{staticClass:"filter-box"},[a("div",{staticClass:"title-date"},[t._m(1),t._v(" "),a("ul",[a("li",{staticClass:"btn1",on:{click:function(e){t.timeSlot(90,212)}}},[t._v("最近3个月")])])]),t._v(" "),a("div",{staticClass:"float"},[a("h3",[t._v("性别选择（单选）")]),t._v(" "),a("el-radio",{attrs:{tabList:t.sex},on:{getRadio:function(e){t.getRadio(arguments,212.1)}}})],1),t._v(" "),a("div",{staticClass:"float"},[a("h3",[t._v("年级选择（单选）")]),t._v(" "),a("el-radio",{attrs:{tabList:t.grade},on:{getRadio:function(e){t.getRadio(arguments,212.2)}}})],1)]),t._v(" "),a("div",{staticClass:"echarts-box"},[a("pie3",{attrs:{data:t.dataList}})],1)])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"title"},[e("em"),this._v("园所\n                  "),e("span",[this._v("身体发育")]),this._v("横向对比")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"title"},[e("em"),this._v("园所儿童\n                  "),e("span",[this._v("身体发育")]),this._v("纵向对比")])}]};var w=a("VU/8")(u,m,!1,function(t){a("3u7M")},"data-v-3dffdc8c",null);e.default=w.exports}});
//# sourceMappingURL=11.fcd9b03cc01665d14988.js.map