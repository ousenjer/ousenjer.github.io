webpackJsonp([6],{"/3j8":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("Xxa5"),n=e.n(i),s=e("exGp"),l=e.n(s),r=e("fZjL"),o=e.n(r),c=e("K7jp"),u=e("eqMh"),g=e("lZmn"),d=e("TgKm"),h=e("RA0d"),m=e("5uec"),v=e("CFpQ"),f=e("aCEB"),D={name:"HealthyToday",components:{ElMap:c.a,Matts:g.a,Pie:d.a,ElLine:h.a,Bars:m.a,Live:u.a},data:function(){return{provinceId:localStorage.getItem("provinceId"),cityId:localStorage.getItem("cityId"),districtId:localStorage.getItem("districtId"),gardenName:localStorage.getItem("gardenName"),gardenId:localStorage.getItem("gardenId"),mapView:!0,gardenRecord:{name:"拱墅区植材小学",location:"拱墅区"},statureRankings:{xData:["暂无数据"],data:[{name:"男童",value:[0]},{name:"女童",value:[0]}],color:["#53e9ee","#ffe98f"],yName:"身高（cm）"},weightRankings:{xData:["暂无数据"],data:[{name:"男童",value:[0]},{name:"女童",value:[0]}],yName:"体重（kg）"},girlData:{data:[{value:0,name:"偏轻"},{value:0,name:"均值"},{value:0,name:"肥胖"},{value:0,name:"超重"}],color:["#ff6c6c","#ff9786","#ffd05a","#ffe98f"],title:"女童"},boyData:{data:[{value:0,name:"偏轻"},{value:0,name:"均值"},{value:0,name:"肥胖"},{value:0,name:"超重"}],color:["#315bff","#7193ff","#53e9ee","#a4ffee"],title:"男童"},KindergartenData:[{unit:"家",subText:"园所总数",sum:0},{unit:"人",subText:"园长总数",sum:0},{unit:"人",subText:"在职教师总数",sum:0},{unit:"人",subText:"在园儿童总数",sum:0}],jobData:{data:[{value:0,name:"正高级"},{value:0,name:"高级"},{value:0,name:"一级"},{value:0,name:"二级"},{value:0,name:"三级"}],color:["#ffbc00","#57d0ff","#4d6bff","#ff6562","#9d70ff"],title:"职称分布",pieSize:{radius:["35%","45%"],center:["50%","35%"],title:{top:52,fontSize:12}}},ageData:{data:[{value:0,name:"00后"},{value:0,name:"90后"},{value:0,name:"80后"},{value:0,name:"70后"}],color:["#1683fb","#61ffe1","#24cbff","#7189ff"],title:"年龄分布",pieSize:{radius:["35%","45%"],center:["50%","35%"],title:{top:52,fontSize:12}}}}},methods:{mapObiterData:function(){var a=this,t=this.$moment().startOf("month").format("YYYY-MM-DD"),e=this.$moment().format("YYYY-MM-DD"),i={gid:1405,sdate:t,edate:e};window.$.ajax({url:"http://api.youjiaoyun.net/weixin.asmx/GetGardenAvgDataList?jsoncallback=?",dataType:"jsonp",data:i,jsonp:"jsoncallback",async:!1,success:function(t){console.log(t,"123123123123123123"),window.$(".refresh").find("i").removeClass("loading");var e={className:[],height:{girl:[],boy:[]}},i={className:[],weight:{girl:[],boy:[]}},n=[];if(t.length){for(var s=0,l=t.length;s<l;s++){for(var r=[[],[],[],[]],o=0,c=t[s].classdatas.length;o<c;o++)t[s].classdatas[o].datas.length&&(r[0].push(t[s].classdatas[o].datas[0].ClassAvgHeight),r[1].push(t[s].classdatas[o].datas[0].ClassAvgWeight),r[2].push(t[s].classdatas[o].datas[1].ClassAvgHeight),r[3].push(t[s].classdatas[o].datas[1].ClassAvgWeight));r=r.map(function(a){var t=0;if(a.length){for(var e=0,i=a.length;e<i;e++)t+=a[e];return t/a.length}return 0}),n.push({name:t[s].GradeName,girl:{height:r[0],weight:r[1]},boy:{height:r[2],weight:r[3]}})}console.log(n,"what");var u=n.filter(function(a){return a.name&&a.girl.height&&a.boy.height});if(console.log(u),u.length){u.sort(function(a,t){return t.boy.height+t.girl.height-(a.boy.height+a.girl.height)});for(var g=0;g<u.length;g++)e.className.push(u[g].name),e.height.girl.push(u[g].girl.height),e.height.boy.push(u[g].boy.height);a.statureRankings={xData:e.className,data:[{name:"男童",value:e.height.boy},{name:"女童",value:e.height.girl}],color:["#53e9ee","#ffe98f"],yName:"身高（cm）"}}else a.statureRankings={xData:["暂无数据"],data:[{value:["0"]},{value:["0"]}]};var d=n.filter(function(a){return a.name&&a.girl.weight&&a.boy.weight});if(d.length){d.sort(function(a,t){return t.boy.weight+t.girl.weight-(a.boy.weight+a.girl.weight)});for(var h=0;h<d.length;h++)i.className.push(d[h].name),i.weight.girl.push(d[h].girl.weight),i.weight.boy.push(d[h].boy.weight);a.weightRankings={xData:i.className,data:[{name:"男童",value:i.weight.boy},{name:"女童",value:i.weight.girl}],color:["#53e9ee","#ffe98f"],yName:"体重（kg）"}}else a.weightRankings={xData:["暂无数据"],data:[{value:["0"]},{value:["0"]}]}}else a.weightRankings={xData:["暂无数据"],data:[{value:["0"]},{value:["0"]}]},a.statureRankings={xData:["暂无数据"],data:[{value:["0"]},{value:["0"]}]}},error:function(a){console.log(a)}});var n={ProvinceId:this.provinceId,CityId:this.cityId,DistrictId:this.districtId,Gid:this.gardenId,IsMonth:!0,StartDate:t,EndDate:e};window.$.ajax({url:"http://api.youjiaoyun.net/weixin.asmx/GetBodyCheckResultList?jsoncallback=?",dataType:"jsonp",data:n,jsonp:"jsoncallback",async:!0,success:function(t){a.girlData.data=a.avgHW(t,0,7006),a.boyData.data=a.avgHW(t,1,7006),console.log(a.girlData,a.boyData)},error:function(a){console.log(a)}})},avgHW:function(a,t,e){var i=[],n=a.filter(function(a){return a.Gender===t&&a.Gid===e});if(n=this.$common.compare(n,"BMIResult"),0!==o()(n).length){var s={"偏轻":0,"均值":0,"肥胖":0,"偏重":0,"超重":0};for(var l in s)n[l]?s[l]=n[l]:s[l]=0;window.$.each(s,function(a,t){i.push({name:a,value:t})})}else i=[{name:"暂无数据",value:0}];return i},getAreaId:function(a){return this.$store.state.areaIdList.filter(function(t){return t.ProvinceName===a||t.CityName===a||t.DistrictName===a})},refresh:function(){window.$(".refresh").find("i").addClass("loading"),this.mapObiterData()},getGardenInfos:function(){var a=l()(n.a.mark(function a(){var t,e,i,s,l,r,o,c,u=this;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.get(f.a.getGardenInfos,{gardenId:this.gardenId});case 2:if(t=a.sent,e=t.data.data,console.log(e,"123123123123123123123"),this.KindergartenData[0].sum=e.gardenCount,this.KindergartenData[1].sum=e.kindergartenCount,this.KindergartenData[2].sum=e.teacherCount,this.KindergartenData[3].sum=e.totalCount,i=["00","90","80","70"],s=["正高级","高级","一级","二级","三级"],this.jobData.data=[{value:0,name:"正高级"},{value:0,name:"高级"},{value:0,name:"一级"},{value:0,name:"二级"},{value:0,name:"三级"}],this.ageData.data=[{value:0,name:"00后"},{value:0,name:"90后"},{value:0,name:"80后"},{value:0,name:"70后"}],e.jobs.length)for(l=function(a,t){var i=e.jobs.filter(function(t){return t.item1===s[a]});i.length?u.jobData.data[a].value=i[0].item2:u.jobData.data[a].value=0},r=0,o=this.jobData.data.length;r<o;r++)l(r,o);else this.jobData.data=[{name:"暂无数据",value:0}];if(e.ages.length)for(c=function(a,t){var n=e.ages.filter(function(t){return t.item1.substring(0,1)===i[a].substring(0,1)});n.length?u.ageData.data[a].value=n.length:u.ageData.data[a].value=0},r=0,o=this.ageData.data.length;r<o;r++)c(r,o);else this.ageData.data=[{name:"暂无数据",value:0}];case 15:case"end":return a.stop()}},a,this)}));return function(){return a.apply(this,arguments)}}(),gardenView:function(a){this.mapView=!this.mapView,this.gardenRecord={name:a.name,location:a.location}},toMapView:function(){this.mapView=!this.mapView}},mounted:function(){this.$common.border(window.$(".bottom .content")),this.mapObiterData(),this.getGardenInfos()}},b={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"main-box growth"},[e("div",{staticClass:"main"},[e("div",{staticClass:"middle"},[e("div",{staticClass:"left"},[e("live",{attrs:{name:a.gardenRecord.name}})],1),a._v(" "),e("div",{staticClass:"right"},[e("p",{staticClass:"refresh"},[a._v("数据每隔五分钟自动刷新\n          "),e("button",{staticClass:"btn1",on:{click:a.refresh}},[e("i",{staticClass:"iconfont"},[a._v("")]),a._v("刷新")])]),a._v(" "),e("ul",{staticClass:"ranking"},[e("li",[a._m(0),a._v(" "),e("div",{staticClass:"content"},["暂无数据"!==a.statureRankings.xData[0]?e("el-line",{attrs:{xData:a.statureRankings.xData,data:a.statureRankings.data,color:a.statureRankings.color,yName:a.statureRankings.yName}}):e("no-data",{attrs:{item:"平均身高"}})],1)]),a._v(" "),e("li",[a._m(1),a._v(" "),e("div",{staticClass:"content"},["暂无数据"!==a.weightRankings.xData[0]?e("bars",{attrs:{xData:a.weightRankings.xData,data:a.weightRankings.data,color:a.weightRankings.color,yName:a.weightRankings.yName}}):e("no-data",{attrs:{item:"平均体重"}})],1)])])])]),a._v(" "),e("div",{staticClass:"line"}),a._v(" "),e("div",{staticClass:"bottom"},[e("ul",{staticClass:"statistics"},[e("li",[a._m(2),a._v(" "),e("ul",{staticClass:"content"},[e("li",["暂无数据"!==a.girlData.data[0].name?e("pie",{attrs:{data:a.girlData.data,color:a.girlData.color,title:a.girlData.title}}):e("no-data",{attrs:{item:"女童BMI"}})],1),a._v(" "),e("li",["暂无数据"!==a.boyData.data[0].name?e("pie",{attrs:{data:a.boyData.data,color:a.boyData.color,title:a.boyData.title}}):e("no-data",{attrs:{item:"男童BMI"}})],1)])]),a._v(" "),e("li"),a._v(" "),e("li",[a._m(3),a._v(" "),e("div",{staticClass:"content"},[e("matts",{attrs:{data:a.KindergartenData}})],1)]),a._v(" "),e("li",[a._m(4),a._v(" "),e("ul",{staticClass:"content"},[e("li",["暂无数据"!==a.jobData.data[0].name?e("pie",{attrs:{data:a.jobData.data,color:a.jobData.color,title:a.jobData.title,pieSize:a.jobData.pieSize}}):e("no-data",{attrs:{item:"职称"}})],1),a._v(" "),e("li",["暂无数据"!==a.ageData.data[0].name?e("pie",{attrs:{data:a.ageData.data,color:a.ageData.color,title:a.ageData.title,pieSize:a.ageData.pieSize}}):e("no-data",{attrs:{item:"年龄"}})],1)])])])])])])},staticRenderFns:[function(){var a=this.$createElement,t=this._self._c||a;return t("h3",{staticClass:"title"},[t("em"),this._v("以平均身高高低排名")])},function(){var a=this.$createElement,t=this._self._c||a;return t("h3",{staticClass:"title"},[t("em"),this._v("以平均体重高低排名")])},function(){var a=this.$createElement,t=this._self._c||a;return t("h3",{staticClass:"title"},[t("em"),this._v("女童/男童BMI分布")])},function(){var a=this.$createElement,t=this._self._c||a;return t("h3",{staticClass:"title"},[t("em"),this._v("幼儿园信息")])},function(){var a=this.$createElement,t=this._self._c||a;return t("h3",{staticClass:"title"},[t("em"),this._v("教师信息")])}]};var p=e("VU/8")(D,b,!1,function(a){e("vWzg"),e("MwWQ")},"data-v-cb27e56c",null);t.default=p.exports},MwWQ:function(a,t){},vWzg:function(a,t){}});
//# sourceMappingURL=6.d2825467c1cea3661f7c.js.map