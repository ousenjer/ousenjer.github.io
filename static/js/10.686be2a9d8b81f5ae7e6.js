webpackJsonp([10],{OgdZ:function(t,a){},fdU6:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("fZjL"),n=e.n(i),r=e("K7jp"),s=e("lZmn"),o=e("TgKm"),l=e("RA0d"),u=e("5uec"),g={name:"HealthyToday",components:{ElMap:r.a,Matts:s.a,Pie:o.a,ElLine:l.a,Bars:u.a},data:function(){return{loading:!0,tagInfoData:{name:"身体发育",data:[]},statureRankings:{xData:["暂无数据"],data:[{name:"男童",value:[0]},{name:"女童",value:[0]}],color:["#53e9ee","#ffe98f"],yName:"身高（cm）"},weightRankings:{xData:["暂无数据"],data:[{name:"男童",value:[0]},{name:"女童",value:[0]}],yName:"体重（kg）",color:["#ff6dff","#315bff"],grid:{top:"20%",left:"0%",right:"0%",bottom:"10%",containLabel:!0}},girlData:{data:[{value:0,name:"偏轻"},{value:0,name:"均值"},{value:0,name:"肥胖"},{value:0,name:"超重"}],color:["#ff6c6c","#ff9786","#ffd05a","#ffe98f","#9d70ff"],title:"女童"},boyData:{data:[{value:0,name:"偏轻"},{value:0,name:"均值"},{value:0,name:"肥胖"},{value:0,name:"超重"}],color:["#315bff","#7193ff","#53e9ee","#a4ffee","#24cbff"],title:"男童"},KindergartenData:[{unit:"家",subText:"园所总数",sum:0},{unit:"人",subText:"园长总数",sum:0},{unit:"人",subText:"在职教师总数",sum:0},{unit:"人",subText:"在园儿童总数",sum:0}],jobData:{data:[{value:0,name:"正高级"},{value:0,name:"高级"},{value:0,name:"一级"},{value:0,name:"二级"},{value:0,name:"三级"}],color:["#ffbc00","#57d0ff","#4d6bff","#ff6562","#9d70ff"],title:"职称分布",pieSize:{radius:["35%","45%"],center:["50%","35%"],title:{top:52,fontSize:12}}},ageData:{data:[{value:0,name:"00后"},{value:0,name:"90后"},{value:0,name:"80后"},{value:0,name:"70后"}],color:["#1683fb","#61ffe1","#24cbff","#7189ff"],title:"年龄分布",pieSize:{radius:["35%","45%"],center:["50%","35%"],title:{top:52,fontSize:12}}}}},methods:{mapObiterData:function(t){var a=this,e=new Date,i={},n=e.getFullYear()+"-"+(e.getMonth()+1)+"-01 00:00:01",r=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" 23:59:59",s=this.getAreaId(t.name);switch(t.level){case"省级":i={ProvinceId:s[0].ProvinceId,CityId:0,DistrictId:0,Gid:0,StartDate:n,EndDate:r};break;case"市级":i={ProvinceId:s[0].ProvinceId,CityId:s[0].CityId,DistrictId:0,Gid:0,StartDate:n,EndDate:r};break;case"县级":i={ProvinceId:s[0].ProvinceId,CityId:s[0].CityId,DistrictId:s[0].DistrictId,Gid:0,StartDate:n,EndDate:r}}var o=i;o.IsMonth=!1,window.$.ajax({url:"http://api.youjiaoyun.net/weixin.asmx/GetAvgBodyCheckResult?jsoncallback=?",dataType:"jsonp",data:o,jsonp:"jsoncallback",async:!0,success:function(t){window.$(".refresh").find("i").removeClass("loading"),a.loading=!1;for(var e=a.$store.state.mapArea.list,i={heightData:{girl:[],boy:[]},weightData:{girl:[],boy:[]},height:[],weight:[]},n=function(a,n){i.height.push({city:e[a],girl:0,boy:0}),i.weight.push({city:e[a],girl:0,boy:0});var r=t.filter(function(t){return t.AreaName===e[a]&&0===t.Gender}),s=t.filter(function(t){return t.AreaName===e[a]&&1===t.Gender});if(r[0]){for(var o=0,l=0,u=0,g=r.length;u<g;u++)o+=r[u].AvgHeight,l+=r[u].AvgWeight;o/=r.length,l/=r.length,i.height[a].girl=o,i.weight[a].girl=l}else i.height[a].girl=0,i.weight[a].girl=0;if(s[0]){for(var c=0,d=0,h=0,f=s.length;h<f;h++)c+=s[h].AvgHeight,d+=s[h].AvgWeight;c/=s.length,d/=s.length,i.height[a].boy=c,i.weight[a].boy=d}else i.height[a].boy=0,i.weight[a].boy=0},r=0,s=e.length;r<s;r++)n(r);i.height.sort(function(t,a){return a.girl+a.boy-(t.girl+t.boy)});var o=[];for(r=0,s=i.height.length;r<s;r++)o.push(i.height[r].city),i.heightData.girl.push(i.height[r].girl),i.heightData.boy.push(i.height[r].boy);a.statureRankings={xData:o,data:[{name:"男童",value:i.heightData.boy},{name:"女童",value:i.heightData.girl}],color:["#53e9ee","#ffe98f"],yName:"身高（cm）"},i.weight.sort(function(t,a){return a.girl+a.boy-(t.girl+t.boy)}),o=[];for(var l=0,u=i.weight.length;l<u;l++)o.push(i.weight[l].city),i.weightData.girl.push(i.weight[l].girl),i.weightData.boy.push(i.weight[l].boy);a.weightRankings={xData:o,data:[{name:"男童",value:i.weightData.boy},{name:"女童",value:i.weightData.girl}],yName:"体重（kg）",color:["#ff6dff","#315bff"],grid:{top:"20%",left:"0%",right:"0%",bottom:"10%",containLabel:!0}}},error:function(t){console.log("err"+t)}}),window.$.ajax({url:"http://api.youjiaoyun.net/weixin.asmx/GetBodyCheckResultList?jsoncallback=?",dataType:"jsonp",data:i,jsonp:"jsoncallback",async:!0,success:function(t){a.girlData.data=a.avgHW(t,0),a.boyData.data=a.avgHW(t,1),a.forTag(t)},error:function(t){console.log(t)}})},avgHW:function(t,a){var e=[],i=[];if("省级"===this.$store.state.mapArea.level)i=t.filter(function(t){return t.Gender===a});else{var r="";switch(this.$store.state.mapArea.level){case"市级":r="CityName";break;case"县级":r="DistrictName"}var s=this.$store.state.mapArea.name;i=t.filter(function(t){return t.Gender===a&&t[r]===s})}if(i=this.$common.compare(i,"BMIResult"),0!==n()(i).length){var o={"偏轻":0,"均值":0,"肥胖":0,"偏重":0,"超重":0};for(var l in o)i[l]?o[l]=i[l]:o[l]=0;window.$.each(o,function(t,a){e.push({name:t,value:a})})}else e=[{name:"暂无数据",value:0}];return e},forTag:function(t){var a=this,e="";switch(this.$store.state.mapArea.level){case"省级":e="CityName";break;case"市级":e="DistrictName"}for(var i=[],n=function(n,r){var s={"偏轻":0,"均值":0,"肥胖":0,"偏重":0,"超重":0},o=t.filter(function(t){return t[e]===a.$store.state.mapArea.list[n]});for(var l in o=a.$common.compare(o,"BMIResult"),s)o[l]?s[l]=o[l]:s[l]=0;i.push({name:a.$store.state.mapArea.list[n],data:s})},r=0,s=this.$store.state.mapArea.list.length;r<s;r++)n(r);this.tagInfoData.data=i},getAreaId:function(t){return this.$store.state.areaIdList.filter(function(a){return a.ProvinceName===t||a.CityName===t||a.DistrictName===t})},refresh:function(){window.$(".refresh").find("i").addClass("loading"),this.loading=!0,console.log(this.$store.state.mapArea.level);var t={level:this.$store.state.mapArea.level,name:this.$store.state.mapArea.name};this.mapObiterData(t)},generalData:function(t){var a=this;this.KindergartenData[0].sum=t.gardenCount,this.KindergartenData[1].sum=t.kindergartenCount,this.KindergartenData[2].sum=t.teacherCount,this.KindergartenData[3].sum=t.totalCount;var e=["00","90","80","70"],i=["正高级","高级","一级","二级","三级"];if(this.jobData.data=[{value:0,name:"正高级"},{value:0,name:"高级"},{value:0,name:"一级"},{value:0,name:"二级"},{value:0,name:"三级"}],this.ageData.data=[{value:0,name:"00后"},{value:0,name:"90后"},{value:0,name:"80后"},{value:0,name:"70后"}],t.jobs.length)for(var n=function(e,n){var r=t.jobs.filter(function(t){return t.item1===i[e]});r.length?a.jobData.data[e].value=r[0].item2:a.jobData.data[e].value=0},r=0,s=i.length;r<s;r++)n(r);else this.jobData.data=[{name:"暂无数据",value:0}];if(t.ages.length){var o=function(i,n){var r=t.ages.filter(function(t){return t.item1.substring(0,1)===e[i].substring(0,1)});r.length?a.ageData.data[i].value=r.length:a.ageData.data[i].value=0};for(r=0,s=e.length;r<s;r++)o(r)}else this.ageData.data=[{name:"暂无数据",value:0}]},gardenList:function(){return[{name:"宝塔区双睿幼儿园",gardenId:1}]},tagInfo:function(t){var a={warnTempCount:0,jcCount:0,fyCount:0,gcCount:0,attendCount:0};for(var e in t)t[e]=window.$.extend({},a,t[e]);console.log("当前区域所有下级总览信息"),console.log(t)}},mounted:function(){this.$common.border(window.$(".bottom .content"))}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main-box growth"},[e("div",{staticClass:"main"},[e("div",{staticClass:"middle"},[e("div",{staticClass:"left"},[e("el-map",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"map",attrs:{tagInfoData:t.tagInfoData,"element-loading-background":"rgba(0, 0, 0, 0)"},on:{mapObiterData:t.mapObiterData,generalData:t.generalData}})],1),t._v(" "),e("div",{staticClass:"right"},[e("p",{staticClass:"refresh"},[t._v("数据每隔五分钟自动刷新"),e("button",{staticClass:"btn1",on:{click:t.refresh}},[e("i",{staticClass:"iconfont"},[t._v("")]),t._v("刷新")])]),t._v(" "),e("ul",{staticClass:"ranking"},[e("li",[t._m(0),t._v(" "),e("div",{staticClass:"content"},[-1!==t.statureRankings.data[0].value.findIndex(function(t){return 0!==t})&&-1!==t.statureRankings.data[1].value.findIndex(function(t){return 0!==t})?e("el-line",{attrs:{xData:t.statureRankings.xData,data:t.statureRankings.data,color:t.statureRankings.color,yName:t.statureRankings.yName}}):e("no-data",{attrs:{item:"平均身高"}})],1)]),t._v(" "),e("li",[t._m(1),t._v(" "),e("div",{staticClass:"content"},[-1!==t.weightRankings.data[0].value.findIndex(function(t){return 0!==t})&&-1!==t.weightRankings.data[1].value.findIndex(function(t){return 0!==t})?e("bars",{attrs:{xData:t.weightRankings.xData,data:t.weightRankings.data,color:t.weightRankings.color,yName:t.weightRankings.yName,grid:t.weightRankings.grid}}):e("no-data",{attrs:{item:"平均体重"}})],1)])])])]),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"bottom"},[e("ul",{staticClass:"statistics"},[e("li",[t._m(2),t._v(" "),e("ul",{staticClass:"content"},[e("li",["暂无数据"!==t.girlData.data[0].name?e("pie",{attrs:{data:t.girlData.data,color:t.girlData.color,title:t.girlData.title}}):e("no-data",{attrs:{item:"女童BMI"}})],1),t._v(" "),e("li",["暂无数据"!==t.boyData.data[0].name?e("pie",{attrs:{data:t.boyData.data,color:t.boyData.color,title:t.boyData.title}}):e("no-data",{attrs:{item:"男童BMI"}})],1)])]),t._v(" "),e("li"),t._v(" "),e("li",[t._m(3),t._v(" "),e("div",{staticClass:"content"},[e("matts",{attrs:{data:t.KindergartenData}})],1)]),t._v(" "),e("li",[t._m(4),t._v(" "),e("ul",{staticClass:"content"},[e("li",["暂无数据"!==t.jobData.data[0].name?e("pie",{attrs:{data:t.jobData.data,color:t.jobData.color,title:t.jobData.title,pieSize:t.jobData.pieSize}}):e("no-data",{attrs:{item:"职称"}})],1),t._v(" "),e("li",["暂无数据"!==t.ageData.data[0].name?e("pie",{attrs:{data:t.ageData.data,color:t.ageData.color,title:t.ageData.title,pieSize:t.ageData.pieSize}}):e("no-data",{attrs:{item:"年龄"}})],1)])])])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{staticClass:"title"},[a("em"),this._v("以平均身高高低排名")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{staticClass:"title"},[a("em"),this._v("以平均体重高低排名")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{staticClass:"title"},[a("em"),this._v("女童/男童BMI分布")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{staticClass:"title"},[a("em"),this._v("幼儿园信息")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{staticClass:"title"},[a("em"),this._v("教师信息")])}]};var d=e("VU/8")(g,c,!1,function(t){e("OgdZ")},"data-v-4e417a87",null);a.default=d.exports}});
//# sourceMappingURL=10.686be2a9d8b81f5ae7e6.js.map